# .env.example
# Copy this file to .env and configure for your environment

# ==============================================================================
# Application Settings
# ==============================================================================
APP_ENV=development
APP_NAME=resell-api
APP_PORT=8080
APP_VERSION=1.0.0
LOG_LEVEL=debug
LOG_FORMAT=json

# ==============================================================================
# Database Configuration (PostgreSQL)
# ==============================================================================
DB_HOST=localhost
DB_PORT=5432
DB_USER=resell
DB_PASSWORD=resell_dev_2025
DB_NAME=resell_inventory
DB_SSL_MODE=disable
DB_MAX_CONNECTIONS=25
DB_MAX_IDLE_CONNECTIONS=5
DB_CONNECTION_LIFETIME=5m
DB_MAX_RETRY_ATTEMPTS=3
DB_RETRY_DELAY=1s

# Database URL (alternative to individual settings)
DATABASE_URL=postgresql://resell:resell_dev_2025@localhost:5432/resell_inventory?sslmode=disable

# ==============================================================================
# Redis Configuration
# ==============================================================================
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0
REDIS_MAX_RETRIES=3
REDIS_MIN_RETRY_BACKOFF=8ms
REDIS_MAX_RETRY_BACKOFF=512ms
REDIS_DIAL_TIMEOUT=5s
REDIS_READ_TIMEOUT=3s
REDIS_WRITE_TIMEOUT=3s
REDIS_POOL_SIZE=10
REDIS_MIN_IDLE_CONNS=5
REDIS_MAX_CONN_AGE=0
REDIS_POOL_TIMEOUT=4s
REDIS_IDLE_TIMEOUT=5m
REDIS_IDLE_CHECK_FREQUENCY=1m

# Cache TTL settings
CACHE_DEFAULT_TTL=3600
CACHE_INVENTORY_TTL=1800
CACHE_DASHBOARD_TTL=300

# ==============================================================================
# Asynq (Async Job Processing)
# ==============================================================================
ASYNQ_REDIS_ADDR=localhost:6379
ASYNQ_REDIS_PASSWORD=
ASYNQ_REDIS_DB=0
ASYNQ_CONCURRENCY=10
ASYNQ_QUEUES=critical:6,default:3,low:1
ASYNQ_STRICT_PRIORITY=false
ASYNQ_SHUTDOWN_TIMEOUT=30s
ASYNQ_HEALTH_CHECK_INTERVAL=10s
ASYNQ_LOG_LEVEL=info

# ==============================================================================
# AWS Configuration (for S3 and production deployment)
# ==============================================================================
AWS_REGION=us-east-1
AWS_ACCESS_KEY_ID=minioadmin
AWS_SECRET_ACCESS_KEY=minioadmin123
AWS_S3_BUCKET=resell-uploads
AWS_S3_ENDPOINT=http://localhost:9000
AWS_S3_USE_PATH_STYLE=true
AWS_S3_DISABLE_SSL=true

# ==============================================================================
# File Processing Configuration
# ==============================================================================
UPLOAD_DIR=./uploads
TEMP_DIR=./tmp
PDF_MAX_SIZE_MB=50
EXCEL_MAX_SIZE_MB=100
IMAGE_MAX_SIZE_MB=10
ALLOWED_FILE_TYPES=pdf,xlsx,xls,csv,jpg,jpeg,png,gif
PROCESSING_TIMEOUT=5m
CLEANUP_INTERVAL=1h
KEEP_PROCESSED_FILES=false

# ==============================================================================
# Security & Authentication
# ==============================================================================
JWT_SECRET=your-super-secret-jwt-key-change-this-in-production
JWT_ISSUER=resell-api
JWT_AUDIENCE=resell-client
JWT_EXPIRATION=24h
JWT_REFRESH_EXPIRATION=168h
JWT_REFRESH_REMEMBER_ME=720h

# Session
SESSION_SECRET=your-session-secret-key-change-this
SESSION_NAME=resell_session
SESSION_MAX_AGE=86400
SESSION_HTTP_ONLY=true
SESSION_SECURE=false
SESSION_SAME_SITE=lax

# CORS
CORS_ALLOWED_ORIGINS=http://localhost:3000,http://localhost:5173,http://localhost:8080
CORS_ALLOWED_METHODS=GET,POST,PUT,PATCH,DELETE,OPTIONS
CORS_ALLOWED_HEADERS=Origin,Content-Type,Accept,Authorization
CORS_ALLOW_CREDENTIALS=true
CORS_MAX_AGE=300

# ==============================================================================
# Rate Limiting
# ==============================================================================
RATE_LIMIT_ENABLED=true
RATE_LIMIT_REQUESTS=100
RATE_LIMIT_DURATION=1m
RATE_LIMIT_BURST=20
API_RATE_LIMIT_PER_IP=1000
API_RATE_LIMIT_PER_USER=5000

# ==============================================================================
# Server Configuration
# ==============================================================================
SERVER_READ_TIMEOUT=15s
SERVER_WRITE_TIMEOUT=15s
SERVER_IDLE_TIMEOUT=60s
SERVER_SHUTDOWN_TIMEOUT=30s
SERVER_MAX_HEADER_BYTES=1048576
SERVER_ENABLE_GRACEFUL_SHUTDOWN=true

# ==============================================================================
# Worker Configuration
# ==============================================================================
WORKER_POOL_SIZE=10
WORKER_JOB_TIMEOUT=5m
WORKER_MAX_RETRIES=3
WORKER_RETRY_DELAY=10s

# ==============================================================================
# Email Configuration (using Mailhog in development)
# ==============================================================================
SMTP_HOST=localhost
SMTP_PORT=1025
SMTP_USER=
SMTP_PASSWORD=
SMTP_FROM_EMAIL=noreply@resell.local
SMTP_FROM_NAME=Resell Inventory System
SMTP_TLS_ENABLED=false

# ==============================================================================
# Monitoring & Observability
# ==============================================================================
METRICS_ENABLED=true
METRICS_PORT=9090
METRICS_PATH=/metrics

TRACING_ENABLED=false
TRACING_SERVICE_NAME=resell-api
TRACING_JAEGER_ENDPOINT=http://localhost:14268/api/traces
TRACING_SAMPLE_RATE=0.1

# ==============================================================================
# External Services
# ==============================================================================
# pgAdmin
PGADMIN_EMAIL=admin@resell.local
PGADMIN_PASSWORD=admin123

# MinIO
MINIO_ROOT_USER=minioadmin
MINIO_ROOT_PASSWORD=minioadmin123

# ==============================================================================
# Business Logic Configuration
# ==============================================================================
# Auction defaults
DEFAULT_BUYERS_PREMIUM_PERCENT=20.0
DEFAULT_SALES_TAX_PERCENT=8.0
DEFAULT_SHIPPING_CALCULATION_MODE=flat

# Inventory settings
AUTO_CATEGORIZE_ENABLED=true
AUTO_PRICE_SUGGESTION_ENABLED=true
PRICE_SUGGESTION_MARGIN_PERCENT=50
MIN_ROI_THRESHOLD=20
STALE_INVENTORY_DAYS=90
CRITICAL_INVENTORY_DAYS=180

# Platform-specific settings
EBAY_API_ENABLED=false
EBAY_API_KEY=
EBAY_API_SECRET=
EBAY_DEFAULT_LISTING_DURATION=7

ETSY_API_ENABLED=false
ETSY_API_KEY=
ETSY_API_SECRET=

FACEBOOK_API_ENABLED=false
FACEBOOK_PAGE_TOKEN=

# ==============================================================================
# Feature Flags
# ==============================================================================
FEATURE_PDF_IMPORT=true
FEATURE_EXCEL_EXPORT=true
FEATURE_AUTO_BACKUP=true
FEATURE_EMAIL_NOTIFICATIONS=true
FEATURE_WEBHOOK_NOTIFICATIONS=false
FEATURE_ADVANCED_SEARCH=true
FEATURE_BULK_OPERATIONS=true
FEATURE_API_V2=false

# ==============================================================================
# Development & Debug
# ==============================================================================
DEBUG=false
DEBUG_SQL=false
DEBUG_HTTP=false
DEBUG_REDIS=false
PPROF_ENABLED=false
PPROF_PORT=6060

# ==============================================================================
# Scheduled Jobs (cron expressions)
# ==============================================================================
CRON_CLEANUP_OLD_FILES="0 2 * * *"
CRON_REFRESH_MATERIALIZED_VIEWS="*/30 * * * *"
CRON_BACKUP_DATABASE="0 3 * * *"
CRON_SEND_INVENTORY_REPORTS="0 9 * * 1"
CRON_CHECK_STALE_INVENTORY="0 10 * * *"